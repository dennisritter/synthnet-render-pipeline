{
    "title": "GLTF Export Configuration V1.",
    "description": "Definition of scene- and object-configurations to build scenes that are exported as GLTF files",
    "$schema": "http://json-schema.org/draft-07/schema#",
    "type": "object",
    "required": [
        "global_scenes",
        "parts"
    ],
    "properties": {
        "global_scenes": {
            "type": "array",
            "description": "Scene definitions that are used for all parts",
            "items": {
                "$ref": "/schemas/scene"
            }
        },
        "parts": {
            "type": "array",
            "description": "List of machine parts to render/export gltfs",
            "items": {
                "type": "object",
                "description": "A machine part",
                "required": [
                    "id",
                    "name",
                    "hierarchy",
                    "single_parts",
                    "scenes"
                ],
                "properties": {
                    "id": {
                        "type": "string",
                        "description": "The identifier for this part"
                    },
                    "name": {
                        "type": "string",
                        "description": "The part's name"
                    },
                    "hierarchy": {
                        "type": "string",
                        "description": "The hierarchy of this part"
                    },
                    "single_parts": {
                        "type": "array",
                        "description": "The single parts this assembly is assembled of or the part itself if it's a single part",
                        "items": {
                            "$ref": "/schemas/single_part"
                        }
                    },
                    "scenes": {
                        "type": "array",
                        "description": "Scene definitions for this part",
                        "items": {
                            "$ref": "/schemas/scene"
                        }
                    }
                }
            }
        },
        "$defs": {
            "point3d": {
                "$id": "/schemas/point_3d",
                "type": "array",
                "description": "A 3D point position defined by it's X,Y,Z coordinates",
                "items": {
                    "type": "number",
                    "description": "[X,Y,Z] coordinates"
                }
            },
            "color_rgb": {
                "$id": "/schemas/color_rgb",
                "type": "array",
                "description": "A color in RGB colorspace",
                "items": {
                    "type": "number",
                    "description": "[R,G,B] color components of the color"
                }
            },
            "cameras": {
                "$id": "/schemas/cameras",
                "type": "array",
                "description": "A list of camera definitions",
                "items": {
                    "$ref": "/schemas/camera"
                }
            },
            "camera": {
                "$id": "/schemas/camera",
                "type": "object",
                "description": "A Camera, defined by it's properties",
                "required": [
                    "position",
                    "type_camera",
                    "target",
                    "focal_length"
                ],
                "properties": {
                    "position": {
                        "$ref": "/schemas/point_3d"
                    },
                    "type_camera": {
                        "type": "string",
                        "description": "The camera type. CAMERA_TYPES = ['persp', 'ortho', 'pano']"
                    },
                    "target": {
                        "$ref": "/schemas/point_3d"
                    },
                    "focal_lenght": {
                        "type": "float",
                        "description": "Focal length setting of the camera"
                    }
                }
            },
            "lights": {
                "$id": "/schemas/lights",
                "type": "array",
                "description": "A list of light definitions",
                "items": {
                    "$ref": "/schemas/light"
                }
            },
            "light": {
                "$id": "/schemas/light",
                "type": "object",
                "description": "A light, defined by it's properties",
                "required": [
                    "type_light",
                    "position",
                    "intensity",
                    "target"
                ],
                "properties": {
                    "type_light": {
                        "type": "string",
                        "description": "The light type"
                    },
                    "position": {
                        "$ref": "/schemas/point_3d"
                    },
                    "target": {
                        "$ref": "/schemas/point_3d"
                    },
                    "intensity": {
                        "type": "number",
                        "description": "The lights intensity"
                    }
                }
            },
            "envmap": {
                "$id": "/schemas/envmap",
                "type": "string",
                "description": "File path to an environment map"
            },
            "scene": {
                "$id": "/schemas/scene",
                "type": "object",
                "description": "A Scene definition",
                "required": [
                    "lights",
                    "camera",
                    "envmap"
                ],
                "properties": {
                    "lights": {
                        "$ref": "/schemas/lights"
                    },
                    "camera": {
                        "$ref": "/schemas/camera"
                    },
                    "envmap": {
                        "$ref": "/schemas/envmap"
                    }
                }
            },
            "single_part": {
                "$id": "/schemas/single_part",
                "type": "object",
                "description": "The single parts of of this assembly",
                "required": [
                    "id",
                    "name",
                    "material"
                ],
                "properties": {
                    "id": {
                        "type": "string",
                        "description": "The part identifier"
                    },
                    "name": {
                        "type": "string",
                        "description": "The name of this part"
                    },
                    "material": {
                        "type": "string",
                        "description": "The material of this single part"
                    }
                }
            }
        }
    }
}